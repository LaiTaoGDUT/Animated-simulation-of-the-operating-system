# Animated-simulation-of-the-operating-system

多道批处理系统的两级调度包括了两个过程，作业调度和进程调度。前者是按一定的作业调度算法，从外存的后备队列中选择作业调入内存，分配必要的资源并为它们创建进程送入就绪队列。而后者则是根据一定的进程调度算法，从就绪队列中选择一个进程，分配处理机，让其执行。本课程设计使用的作业调度算法是先来先服务算法，进程调度算法采用可抢占的最短进程优先算法，内存分配策略采用动态分区分配。

 [查看预览](https://laitaogdut.github.io/Animated-simulation-of-the-operating-system/index.html)



https://github.com/user-attachments/assets/a820f06c-2892-4d6d-a6ce-61cce6f0d25d



在两级调度的设计上，为了实现多道批处理系统的两级调度，将为模拟调度系统设置一个后备队列和一个就绪队列，分别用于存放待调度的作业和进程，另外设置两个内存分区队列，分别用于存放空闲内存分区和忙碌内存分区，最后设置一个完成队列，存放已完成的作业对象，便于结束后的模拟结果输出。

在动画演示的设计上，作业被调度、进程被调度、处理机被抢占以及内存的分配和回收等都需要用动画的形式来体现，首先需要进行下列准备：

（1）在程序界面上布置一个画布组件，后备队列、就绪队列、所有内存分区以及运行进程在画布中都有固定的位置，然后将作业、进程和内存分区分别定义为不同大小颜色的方块对象，任意时刻根据它们在队列中所处的位置或在内存中的起始地址描绘在画布的相应位置上。

（2）设计方块对象在整个调度模拟过程中会发生的行为，进程对象有初次进入就绪队列、在就绪队列的位置发生变化、获得处理机、重新回到就绪队列和完成运行五种行为，作业对象有在后备队列的位置发生变化、被调度运行和完成运行三种行为，内存分区对象只有大小发生变化这一种行为，当内存分区对象的大小变为0时，就表示该内存分区被完全分配或回收。

（3）在系统内部设置一个计时器，系统的时间按一定的速度增加，每经过单位时间，就执行模拟算法，当在特定时间发生了调度或内存分配回收事件时，就触发方块对象们的相应行为。

系统模拟启动后，以每秒30次或以上的速度不断递归执行渲染画布函数，描绘出所有方块对象，如果有对象触发了行为，就在执行渲染函数时，不断以微小的增量改变方块的位置或大小，直至方块到达目标位置或大小为止，这样就能创造方块的动画效果，比如进程方块触发了获得处理机的行为，那么该进程方块就在渲染的过程中不断移动到画布中预先设置好的运行进程的位置。由于模拟算法的执行是非常快的，但动画的执行却需要一段时间，为了便于使用者观察动画演示，当画布中存在未移动完毕的方块对象时，系统的时间需要暂时静止。

由于加入了动画演示，因此模拟两级调度算法的设计与传统的模拟不同，区别在于时间的模拟，由于系统时间是不断增加的，因此不再能够立刻得出模拟结果了，而需要等待系统时间增加到所有作业都执行完毕的时间点才能得出一组作业的执行结果，在调度算法的设计上，重点在于时间的比较，系统时间每往前进一个单位，就运行一次模拟算法，首先查看运行进程的是否已经运行完毕，若运行完毕，销毁进程，回收资源和内存分区，创建已完成作业对象加入完成队列，当内存中的进程数未满时，从后备队列中调度已经到达且静态资源和内存需求能被满足的若干个作业，分配静态资源和内存分区，从就绪队列和运行进程（如果有的话）中选取最短的进程获得处理机，各对象发生事件时，调用其相应的行为函数，如此反复直至后备队列的进程都执行完毕。
